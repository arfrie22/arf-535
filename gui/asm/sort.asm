.prog

ldl sp 0xF000
ldh sp 0

; list
lea r0 d:list

; length
ldl r1 1000
ldh r1 0

; sort list r0 = &list, r1 = len(list)
matrix_multiply:
; &top
push r2
; &lower_number
push r3
; lower_number
push r4
; higher_number
push r5
; has_swapped
push r6

; &top = &list + len(list)
add r2 r0 r1
dec r2

sort_loop:
;&lower_number = &list
ldr r3 r0
; has_swapped = 0
xor r6 r6 r6

iteration:

ldr r4 d[r3]
ldr r5 d[r3+1]

; if lower_number <= higher_number
cmp r4 r5
ble p:after_swap
;need to swap
str d[r3] r5
str d[r3+1] r4
inc r6
after_swap:

inc r3
; if &lower_number < &top
cmp r3 r2
blt p:iteration

cmp r6
bgt p:sort_loop

;&B_k,j
pop r15
;&A_i,k
pop r14
;mult result
pop r13
;B_k,j
pop r12
;A_i,k
pop r11
;sum
pop r10
;k
pop r9
;j
pop r8
;i
pop r7

.data
list 70#1 120#1 861#1 228#1 166#1 793#1 870#1 80#1 412#1 528#1 281#1 129#1 878#1 623#1 58#1 626#1 316#1 946#1 62#1 685#1 521#1 322#1 694#1 340#1 629#1 240#1 809#1 998#1 779#1 469#1 136#1 933#1 287#1 49#1 484#1 394#1 280#1 349#1 275#1 499#1 22#1 50#1 236#1 387#1 497#1 772#1 29#1 964#1 877#1 262#1 59#1 854#1 433#1 552#1 568#1 200#1 911#1 374#1 450#1 859#1 651#1 788#1 997#1 833#1 311#1 745#1 388#1 177#1 740#1 811#1 237#1 919#1 319#1 342#1 850#1 307#1 482#1 621#1 161#1 222#1 899#1 795#1 321#1 983#1 656#1 914#1 763#1 715#1 826#1 830#1 526#1 862#1 277#1 731#1 823#1 907#1 555#1 128#1 927#1 503#1 488#1 653#1 965#1 630#1 716#1 489#1 44#1 814#1 153#1 473#1 511#1 471#1 967#1 114#1 817#1 821#1 397#1 140#1 879#1 797#1 849#1 898#1 756#1 558#1 271#1 87#1 475#1 605#1 25#1 966#1 885#1 851#1 492#1 538#1 575#1 212#1 667#1 516#1 487#1 737#1 227#1 676#1 730#1 985#1 48#1 337#1 671#1 425#1 565#1 917#1 193#1 992#1 663#1 900#1 386#1 622#1 507#1 960#1 802#1 296#1 404#1 515#1 875#1 47#1 15#1 520#1 176#1 169#1 921#1 897#1 665#1 292#1 710#1 844#1 211#1 69#1 884#1 523#1 789#1 819#1 796#1 318#1 207#1 759#1 260#1 767#1 857#1 805#1 306#1 627#1 566#1 385#1 186#1 500#1 689#1 618#1 45#1 225#1 455#1 791#1 299#1 883#1 144#1 210#1 650#1 588#1 808#1 231#1 442#1 121#1 339#1 93#1 760#1 638#1 103#1 963#1 180#1 197#1 512#1 506#1 7#1 289#1 640#1 839#1 84#1 801#1 55#1 53#1 781#1 834#1 637#1 860#1 91#1 957#1 110#1 163#1 681#1 400#1 934#1 99#1 916#1 697#1 648#1 168#1 221#1 915#1 937#1 658#1 486#1 362#1 436#1 226#1 111#1 592#1 546#1 224#1 18#1 12#1 619#1 901#1 684#1 958#1 591#1 252#1 539#1 199#1 871#1 209#1 389#1 445#1 430#1 686#1 154#1 391#1 109#1 744#1 847#1 800#1 94#1 213#1 440#1 976#1 73#1 776#1 181#1 775#1 747#1 257#1 74#1 535#1 439#1 375#1 295#1 707#1 52#1 945#1 837#1 393#1 219#1 624#1 419#1 595#1 461#1 204#1 541#1 977#1 923#1 672#1 579#1 218#1 348#1 298#1 905#1 953#1 435#1 540#1 501#1 852#1 522#1 755#1 255#1 564#1 5#1 317#1 514#1 379#1 941#1 904#1 104#1 766#1 639#1 462#1 247#1 505#1 867#1 392#1 232#1 659#1 570#1 986#1 264#1 170#1 660#1 810#1 969#1 418#1 713#1 305#1 1#1 617#1 549#1 509#1 399#1 40#1 616#1 926#1 589#1 466#1 751#1 148#1 413#1 483#1 17#1 353#1 646#1 712#1 887#1 78#1 429#1 843#1 31#1 356#1 330#1 66#1 325#1 940#1 233#1 420#1 838#1 717#1 239#1 993#1 970#1 752#1 36#1 741#1 999#1 367#1 147#1 816#1 188#1 657#1 550#1 590#1 83#1 421#1 703#1 818#1 582#1 720#1 491#1 294#1 754#1 770#1 955#1 864#1 824#1 682#1 451#1 108#1 398#1 994#1 457#1 143#1 354#1 585#1 594#1 470#1 606#1 395#1 414#1 774#1 873#1 155#1 635#1 368#1 679#1 100#1 714#1 377#1 726#1 632#1 757#1 910#1 711#1 559#1 24#1 652#1 41#1 150#1 708#1 576#1 411#1 518#1 642#1 628#1 173#1 359#1 96#1 198#1 596#1 272#1 235#1 906#1 369#1 162#1 405#1 11#1 947#1 79#1 88#1 338#1 315#1 250#1 401#1 545#1 794#1 431#1 777#1 578#1 980#1 982#1 971#1 943#1 633#1 988#1 427#1 494#1 8#1 853#1 537#1 548#1 896#1 764#1 350#1 815#1 569#1 669#1 343#1 139#1 723#1 0#1 300#1 601#1 476#1 261#1 806#1 34#1 869#1 324#1 102#1 38#1 771#1 674#1 402#1 792#1 908#1 551#1 732#1 485#1 323#1 920#1 529#1 735#1 253#1 613#1 9#1 284#1 677#1 443#1 308#1 57#1 924#1 28#1 496#1 314#1 266#1 20#1 43#1 302#1 690#1 930#1 468#1 820#1 530#1 437#1 981#1 954#1 216#1 693#1 614#1 699#1 597#1 125#1 688#1 692#1 856#1 441#1 205#1 866#1 959#1 961#1 472#1 504#1 736#1 593#1 465#1 241#1 675#1 727#1 832#1 620#1 81#1 208#1 366#1 329#1 733#1 490#1 868#1 602#1 634#1 194#1 704#1 803#1 889#1 608#1 799#1 141#1 996#1 643#1 922#1 246#1 845#1 380#1 408#1 783#1 666#1 122#1 464#1 876#1 276#1 113#1 182#1 827#1 571#1 687#1 191#1 577#1 762#1 645#1 612#1 785#1 890#1 341#1 165#1 479#1 230#1 706#1 282#1 567#1 962#1 215#1 990#1 655#1 291#1 254#1 668#1 382#1 310#1 132#1 705#1 531#1 603#1 407#1 67#1 138#1 92#1 761#1 719#1 448#1 286#1 381#1 842#1 987#1 312#1 33#1 893#1 481#1 536#1 631#1 932#1 384#1 115#1 784#1 709#1 444#1 664#1 46#1 10#1 561#1 525#1 841#1 196#1 171#1 68#1 661#1 846#1 855#1 214#1 573#1 328#1 333#1 334#1 798#1 467#1 131#1 332#1 749#1 938#1 378#1 532#1 912#1 179#1 174#1 510#1 972#1 293#1 615#1 739#1 453#1 456#1 524#1 82#1 790#1 902#1 360#1 396#1 190#1 662#1 572#1 787#1 135#1 495#1 119#1 158#1 513#1 201#1 76#1 984#1 734#1 142#1 554#1 581#1 23#1 493#1 895#1 327#1 813#1 929#1 587#1 729#1 417#1 872#1 974#1 133#1 137#1 326#1 106#1 438#1 234#1 724#1 279#1 863#1 753#1 502#1 424#1 534#1 519#1 925#1 90#1 903#1 888#1 268#1 77#1 782#1 670#1 478#1 517#1 270#1 978#1 98#1 285#1 184#1 446#1 32#1 331#1 157#1 452#1 134#1 991#1 975#1 956#1 358#1 543#1 309#1 352#1 636#1 372#1 649#1 840#1 313#1 172#1 263#1 547#1 722#1 935#1 458#1 828#1 346#1 508#1 750#1 718#1 950#1 283#1 347#1 979#1 743#1 556#1 116#1 124#1 882#1 454#1 944#1 780#1 574#1 206#1 584#1 416#1 583#1 183#1 304#1 65#1 2#1 460#1 498#1 265#1 30#1 949#1 89#1 248#1 320#1 336#1 673#1 61#1 765#1 223#1 370#1 447#1 355#1 21#1 822#1 773#1 527#1 151#1 149#1 586#1 804#1 64#1 562#1 610#1 611#1 217#1 865#1 951#1 192#1 680#1 463#1 373#1 344#1 127#1 238#1 75#1 831#1 560#1 886#1 913#1 644#1 130#1 85#1 995#1 474#1 553#1 351#1 16#1 363#1 376#1 892#1 19#1 202#1 267#1 383#1 948#1 3#1 973#1 390#1 60#1 39#1 345#1 607#1 278#1 426#1 691#1 544#1 14#1 288#1 604#1 152#1 112#1 105#1 696#1 459#1 654#1 580#1 357#1 931#1 598#1 758#1 175#1 542#1 725#1 807#1 748#1 26#1 335#1 244#1 27#1 13#1 95#1 812#1 123#1 600#1 71#1 428#1 245#1 701#1 894#1 256#1 968#1 557#1 728#1 146#1 243#1 858#1 297#1 269#1 56#1 145#1 164#1 928#1 533#1 641#1 683#1 829#1 364#1 625#1 721#1 37#1 167#1 449#1 101#1 406#1 178#1 647#1 72#1 695#1 160#1 835#1 477#1 303#1 107#1 365#1 738#1 415#1 97#1 599#1 361#1 220#1 702#1 6#1 423#1 891#1 229#1 156#1 918#1 301#1 63#1 746#1 189#1 371#1 117#1 185#1 909#1 989#1 4#1 609#1 251#1 35#1 290#1 259#1 159#1 422#1 432#1 410#1 126#1 825#1 778#1 54#1 881#1 768#1 242#1 273#1 786#1 700#1 874#1 258#1 118#1 939#1 936#1 195#1 51#1 563#1 86#1 434#1 42#1 880#1 203#1 848#1 249#1 742#1 678#1 480#1 274#1 769#1 403#1 942#1 409#1 952#1 698#1 187#1 836#1